// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
    directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Resumes {
    id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    data      Json
    createdAt DateTime  @default(now()) @map("created_at")
    active    Boolean   @default(true)
    profiles  Profiles? @relation(fields: [profileId], references: [id])
    profileId String?   @db.Uuid

    @@map("resumes")
}

model Profiles {
    id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    data      Json
    createdAt DateTime  @default(now()) @map("created_at")
    active    Boolean   @default(true)
    user      Users     @relation(fields: [userId], references: [id])
    userId    String    @db.Uuid
    Resumes   Resumes[]

    @@map("profiles")
}

model UsersAuthentications {
    id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    userId         String   @db.Uuid
    subscriptionId String
    data           Json
    createdAt      DateTime @default(now()) @map("created_at")
    active         Boolean  @default(true)
    user           Users    @relation(fields: [userId], references: [id])

    @@map("user_authentications")
}

model Users {
    id                   String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    data                 Json
    createdAt            DateTime               @default(now()) @map("created_at")
    active               Boolean                @default(true)
    UsersAuthentications UsersAuthentications[]
    Profiles             Profiles[]

    @@map("users")
}
